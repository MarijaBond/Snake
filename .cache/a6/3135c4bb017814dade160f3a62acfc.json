{"id":"BoS/","dependencies":[{"name":"C:\\Users\\Marija\\Desktop\\Snake\\tsconfig.json","includedInParent":true,"mtime":1567583840248},{"name":"C:\\Users\\Marija\\Desktop\\Snake\\package.json","includedInParent":true,"mtime":1568393906314},{"name":"./Grid","loc":{"line":1,"column":21},"parent":"C:\\Users\\Marija\\Desktop\\Snake\\src\\engine\\Game.ts","resolved":"C:\\Users\\Marija\\Desktop\\Snake\\src\\engine\\Grid.ts"},{"name":"./Snake","loc":{"line":2,"column":22},"parent":"C:\\Users\\Marija\\Desktop\\Snake\\src\\engine\\Game.ts","resolved":"C:\\Users\\Marija\\Desktop\\Snake\\src\\engine\\Snake.ts"},{"name":"./Configuration","loc":{"line":3,"column":26},"parent":"C:\\Users\\Marija\\Desktop\\Snake\\src\\engine\\Game.ts","resolved":"C:\\Users\\Marija\\Desktop\\Snake\\src\\engine\\Configuration.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.Game=void 0;var t=require(\"./Grid\"),i=require(\"./Snake\"),e=require(\"./Configuration\"),n=function(){function n(e){this.score=0,this.running=!1,this.configuration=e,this.snake=new i.Snake,this.grid=new t.Grid(this.configuration),this.nextTick=0,this.running=!0}return n.prototype.getSnake=function(){return this.snake},n.prototype.getConfiguration=function(){return this.configuration},n.prototype.shouldUpdate=function(t){return this.running&&t>=this.nextTick},n.prototype.update=function(t){switch(this.nextTick=t+this.configuration.speed,this.snake.move(),this.checkState()){case-1:this.die();break;case 1:this.snake.grow(),this.score+=100,this.grid.removeApple(this.snake.getHead()),this.grid.addApples(),this.grid.isDone()&&this.levelUp()}},n.prototype.checkState=function(){var t=this.snake.getHead();return this.isOutside(t)||this.snake.isSnake()?-1:this.grid.isAppleInside(t)?1:0},n.prototype.levelUp=function(){this.score+=1e3,this.configuration.level++,this.configuration.level<e.MAX_LEVEL?(this.configuration.speed-=7,this.grid.seed()):this.win()},n.prototype.win=function(){this.stop()},n.prototype.die=function(){this.stop()},n.prototype.isOutside=function(t){var i=this.configuration,e=i.nbCellsX,n=i.nbCellsY;return t.x<0||t.x>=e||t.y<0||t.y>=n},n.prototype.getScore=function(){return this.score},n.prototype.getGrid=function(){return this.grid},n.prototype.stop=function(){this.running=!1},n}();exports.Game=n;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/engine/Game.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":0}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":13}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":20}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":35}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":43}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":56}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":57}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":64}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":68}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":76}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":86}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":88}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":94}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":102}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":112}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":114}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":122}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":133}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":135}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":143}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":162}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":164}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":14,"column":2},"generated":{"line":1,"column":175}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":14,"column":2},"generated":{"line":1,"column":184}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":14,"column":14},"generated":{"line":1,"column":186}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":7,"column":10},"generated":{"line":1,"column":189}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":7,"column":10},"generated":{"line":1,"column":194}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":7,"column":26},"generated":{"line":1,"column":200}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":8,"column":10},"generated":{"line":1,"column":202}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":8,"column":10},"generated":{"line":1,"column":207}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":8,"column":29},"generated":{"line":1,"column":216}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":15,"column":9},"generated":{"line":1,"column":218}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":15,"column":9},"generated":{"line":1,"column":223}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":15,"column":25},"generated":{"line":1,"column":237}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":16,"column":9},"generated":{"line":1,"column":239}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":16,"column":9},"generated":{"line":1,"column":244}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":16,"column":17},"generated":{"line":1,"column":250}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":16,"column":21},"generated":{"line":1,"column":254}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":16,"column":17},"generated":{"line":1,"column":256}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":17,"column":9},"generated":{"line":1,"column":262}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":17,"column":9},"generated":{"line":1,"column":267}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":17,"column":16},"generated":{"line":1,"column":272}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":17,"column":20},"generated":{"line":1,"column":276}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":17,"column":16},"generated":{"line":1,"column":278}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":17,"column":25},"generated":{"line":1,"column":283}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":17,"column":30},"generated":{"line":1,"column":288}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":18,"column":9},"generated":{"line":1,"column":303}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":18,"column":9},"generated":{"line":1,"column":308}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":18,"column":20},"generated":{"line":1,"column":317}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":19,"column":9},"generated":{"line":1,"column":319}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":19,"column":9},"generated":{"line":1,"column":324}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":19,"column":19},"generated":{"line":1,"column":333}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":107,"column":0},"generated":{"line":1,"column":335}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":22,"column":2},"generated":{"line":1,"column":342}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":22,"column":2},"generated":{"line":1,"column":344}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":22,"column":2},"generated":{"line":1,"column":354}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":22,"column":2},"generated":{"line":1,"column":363}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":23,"column":11},"generated":{"line":1,"column":374}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":23,"column":11},"generated":{"line":1,"column":381}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":23,"column":16},"generated":{"line":1,"column":386}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":26,"column":2},"generated":{"line":1,"column":393}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":26,"column":2},"generated":{"line":1,"column":395}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":26,"column":2},"generated":{"line":1,"column":405}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":26,"column":2},"generated":{"line":1,"column":422}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":27,"column":11},"generated":{"line":1,"column":433}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":27,"column":11},"generated":{"line":1,"column":440}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":27,"column":16},"generated":{"line":1,"column":445}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":30,"column":2},"generated":{"line":1,"column":460}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":30,"column":2},"generated":{"line":1,"column":462}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":30,"column":2},"generated":{"line":1,"column":472}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":30,"column":2},"generated":{"line":1,"column":485}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":30,"column":15},"generated":{"line":1,"column":494}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":31,"column":11},"generated":{"line":1,"column":497}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":31,"column":11},"generated":{"line":1,"column":504}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":31,"column":16},"generated":{"line":1,"column":509}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":31,"column":27},"generated":{"line":1,"column":518}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":31,"column":35},"generated":{"line":1,"column":521}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":31,"column":40},"generated":{"line":1,"column":526}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":34,"column":2},"generated":{"line":1,"column":536}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":34,"column":2},"generated":{"line":1,"column":538}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":34,"column":2},"generated":{"line":1,"column":548}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":34,"column":2},"generated":{"line":1,"column":555}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":34,"column":9},"generated":{"line":1,"column":564}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":39,"column":12},"generated":{"line":1,"column":567}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":35,"column":9},"generated":{"line":1,"column":574}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":35,"column":9},"generated":{"line":1,"column":579}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":35,"column":20},"generated":{"line":1,"column":588}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":35,"column":27},"generated":{"line":1,"column":590}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":35,"column":32},"generated":{"line":1,"column":595}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":35,"column":46},"generated":{"line":1,"column":609}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":37,"column":9},"generated":{"line":1,"column":615}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":37,"column":9},"generated":{"line":1,"column":620}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":37,"column":15},"generated":{"line":1,"column":626}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":39,"column":12},"generated":{"line":1,"column":633}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":39,"column":17},"generated":{"line":1,"column":638}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":40,"column":11},"generated":{"line":1,"column":652}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":40,"column":12},"generated":{"line":1,"column":657}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":41,"column":13},"generated":{"line":1,"column":659}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":41,"column":13},"generated":{"line":1,"column":664}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":42,"column":8},"generated":{"line":1,"column":670}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":43,"column":11},"generated":{"line":1,"column":676}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":43,"column":11},"generated":{"line":1,"column":681}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":44,"column":13},"generated":{"line":1,"column":683}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":44,"column":13},"generated":{"line":1,"column":688}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":44,"column":19},"generated":{"line":1,"column":694}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":45,"column":13},"generated":{"line":1,"column":701}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":45,"column":13},"generated":{"line":1,"column":706}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":45,"column":22},"generated":{"line":1,"column":713}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":46,"column":13},"generated":{"line":1,"column":717}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":46,"column":13},"generated":{"line":1,"column":722}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":46,"column":18},"generated":{"line":1,"column":727}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":46,"column":30},"generated":{"line":1,"column":739}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":46,"column":35},"generated":{"line":1,"column":744}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":46,"column":41},"generated":{"line":1,"column":750}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":47,"column":13},"generated":{"line":1,"column":761}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":47,"column":13},"generated":{"line":1,"column":766}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":47,"column":18},"generated":{"line":1,"column":771}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":48,"column":12},"generated":{"line":1,"column":783}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":48,"column":17},"generated":{"line":1,"column":788}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":48,"column":22},"generated":{"line":1,"column":793}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":49,"column":15},"generated":{"line":1,"column":803}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":49,"column":15},"generated":{"line":1,"column":808}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":54,"column":2},"generated":{"line":1,"column":820}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":54,"column":2},"generated":{"line":1,"column":822}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":54,"column":2},"generated":{"line":1,"column":832}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":54,"column":2},"generated":{"line":1,"column":843}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":55,"column":10},"generated":{"line":1,"column":854}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":55,"column":10},"generated":{"line":1,"column":858}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":55,"column":17},"generated":{"line":1,"column":860}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":1,"column":865}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":55,"column":28},"generated":{"line":1,"column":871}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":58,"column":8},"generated":{"line":1,"column":881}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":58,"column":8},"generated":{"line":1,"column":888}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":58,"column":13},"generated":{"line":1,"column":893}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":58,"column":23},"generated":{"line":1,"column":903}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":58,"column":32},"generated":{"line":1,"column":907}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":58,"column":37},"generated":{"line":1,"column":912}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":58,"column":43},"generated":{"line":1,"column":918}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":60,"column":14},"generated":{"line":1,"column":929}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":64,"column":8},"generated":{"line":1,"column":931}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":64,"column":13},"generated":{"line":1,"column":936}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":64,"column":18},"generated":{"line":1,"column":941}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":64,"column":32},"generated":{"line":1,"column":955}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":65,"column":13},"generated":{"line":1,"column":958}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":69,"column":11},"generated":{"line":1,"column":960}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":72,"column":2},"generated":{"line":1,"column":963}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":72,"column":2},"generated":{"line":1,"column":965}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":72,"column":2},"generated":{"line":1,"column":975}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":72,"column":2},"generated":{"line":1,"column":983}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":73,"column":9},"generated":{"line":1,"column":994}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":73,"column":9},"generated":{"line":1,"column":999}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":73,"column":18},"generated":{"line":1,"column":1006}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":74,"column":9},"generated":{"line":1,"column":1010}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":74,"column":9},"generated":{"line":1,"column":1015}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":74,"column":23},"generated":{"line":1,"column":1029}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":75,"column":8},"generated":{"line":1,"column":1037}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":75,"column":13},"generated":{"line":1,"column":1042}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":75,"column":27},"generated":{"line":1,"column":1056}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":75,"column":35},"generated":{"line":1,"column":1062}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":75,"column":4},"generated":{"line":1,"column":1064}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":76,"column":11},"generated":{"line":1,"column":1075}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":76,"column":11},"generated":{"line":1,"column":1080}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":76,"column":25},"generated":{"line":1,"column":1094}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":76,"column":34},"generated":{"line":1,"column":1101}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":77,"column":11},"generated":{"line":1,"column":1103}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":77,"column":11},"generated":{"line":1,"column":1108}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":77,"column":16},"generated":{"line":1,"column":1113}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":79,"column":11},"generated":{"line":1,"column":1121}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":79,"column":11},"generated":{"line":1,"column":1126}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":83,"column":2},"generated":{"line":1,"column":1133}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":83,"column":2},"generated":{"line":1,"column":1135}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":83,"column":2},"generated":{"line":1,"column":1145}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":83,"column":2},"generated":{"line":1,"column":1149}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":84,"column":9},"generated":{"line":1,"column":1160}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":84,"column":9},"generated":{"line":1,"column":1165}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":87,"column":2},"generated":{"line":1,"column":1173}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":87,"column":2},"generated":{"line":1,"column":1175}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":87,"column":2},"generated":{"line":1,"column":1185}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":87,"column":2},"generated":{"line":1,"column":1189}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":88,"column":9},"generated":{"line":1,"column":1200}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":88,"column":9},"generated":{"line":1,"column":1205}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":91,"column":2},"generated":{"line":1,"column":1213}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":91,"column":2},"generated":{"line":1,"column":1215}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":91,"column":2},"generated":{"line":1,"column":1225}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":91,"column":2},"generated":{"line":1,"column":1235}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":91,"column":12},"generated":{"line":1,"column":1244}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":92,"column":10},"generated":{"line":1,"column":1247}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":92,"column":10},"generated":{"line":1,"column":1251}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":92,"column":10},"generated":{"line":1,"column":1253}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":92,"column":10},"generated":{"line":1,"column":1258}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":92,"column":12},"generated":{"line":1,"column":1272}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":92,"column":12},"generated":{"line":1,"column":1274}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":92,"column":12},"generated":{"line":1,"column":1276}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":92,"column":22},"generated":{"line":1,"column":1285}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":92,"column":22},"generated":{"line":1,"column":1287}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":92,"column":22},"generated":{"line":1,"column":1289}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":93,"column":11},"generated":{"line":1,"column":1298}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":93,"column":11},"generated":{"line":1,"column":1305}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":93,"column":16},"generated":{"line":1,"column":1307}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":93,"column":20},"generated":{"line":1,"column":1309}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":93,"column":25},"generated":{"line":1,"column":1312}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":93,"column":30},"generated":{"line":1,"column":1314}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":93,"column":35},"generated":{"line":1,"column":1317}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":93,"column":47},"generated":{"line":1,"column":1320}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":93,"column":52},"generated":{"line":1,"column":1322}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":93,"column":56},"generated":{"line":1,"column":1324}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":93,"column":61},"generated":{"line":1,"column":1327}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":93,"column":66},"generated":{"line":1,"column":1329}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":93,"column":71},"generated":{"line":1,"column":1332}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":96,"column":2},"generated":{"line":1,"column":1335}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":96,"column":2},"generated":{"line":1,"column":1337}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":96,"column":2},"generated":{"line":1,"column":1347}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":96,"column":2},"generated":{"line":1,"column":1356}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":97,"column":11},"generated":{"line":1,"column":1367}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":97,"column":11},"generated":{"line":1,"column":1374}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":97,"column":16},"generated":{"line":1,"column":1379}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":100,"column":2},"generated":{"line":1,"column":1386}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":100,"column":2},"generated":{"line":1,"column":1388}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":100,"column":2},"generated":{"line":1,"column":1398}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":100,"column":2},"generated":{"line":1,"column":1406}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":101,"column":11},"generated":{"line":1,"column":1417}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":101,"column":11},"generated":{"line":1,"column":1424}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":101,"column":16},"generated":{"line":1,"column":1429}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":104,"column":2},"generated":{"line":1,"column":1435}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":104,"column":2},"generated":{"line":1,"column":1437}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":104,"column":2},"generated":{"line":1,"column":1447}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":104,"column":2},"generated":{"line":1,"column":1452}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":105,"column":9},"generated":{"line":1,"column":1463}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":105,"column":9},"generated":{"line":1,"column":1468}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":105,"column":19},"generated":{"line":1,"column":1477}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":107,"column":0},"generated":{"line":1,"column":1480}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":1482}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":1485}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":1493}},{"source":"../src/engine/Game.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":1498}}],"sources":{"../src/engine/Game.ts":"import { Grid } from \"./Grid\";\r\nimport { Snake } from \"./Snake\";\r\nimport { Configuration, MAX_LEVEL } from \"./Configuration\";\r\nimport { Cell } from \"./Cell\";\r\n\r\nexport class Game {\r\n  private score: number = 0;\r\n  private running: boolean = false;\r\n  private grid: Grid;\r\n  private snake: Snake;\r\n  private configuration: Configuration;\r\n  private nextTick: number;\r\n\r\n  constructor(configuration: Configuration) {\r\n    this.configuration = configuration;\r\n    this.snake = new Snake();\r\n    this.grid = new Grid(this.configuration);\r\n    this.nextTick = 0;\r\n    this.running = true;\r\n  }\r\n\r\n  getSnake(): Snake {\r\n    return this.snake;\r\n  }\r\n\r\n  getConfiguration() {\r\n    return this.configuration;\r\n  }\r\n\r\n  shouldUpdate(time: number): boolean {\r\n    return this.running && time >= this.nextTick;\r\n  }\r\n\r\n  update(time: number) {\r\n    this.nextTick = time + this.configuration.speed;\r\n\r\n    this.snake.move();\r\n\r\n    switch (this.checkState()) {\r\n      case -1:\r\n        this.die();\r\n        break;\r\n      case 1:\r\n        this.snake.grow();\r\n        this.score += 100;\r\n        this.grid.removeApple(this.snake.getHead());\r\n        this.grid.addApples();\r\n        if (this.grid.isDone()) {\r\n          this.levelUp();\r\n        }\r\n    }\r\n  }\r\n\r\n  checkState() {\r\n    const cell = this.snake.getHead();\r\n\r\n    // left the play area or ate itself??\r\n    if (this.isOutside(cell) || this.snake.isSnake()) {\r\n      // dead\r\n      return -1;\r\n    }\r\n\r\n    // ate apple?\r\n    if (this.grid.isAppleInside(cell)) {\r\n      return 1;\r\n    }\r\n\r\n    // nothing special\r\n    return 0;\r\n  }\r\n\r\n  levelUp() {\r\n    this.score += 1000;\r\n    this.configuration.level++;\r\n    if (this.configuration.level < MAX_LEVEL) {\r\n      this.configuration.speed -= 7;\r\n      this.grid.seed();\r\n    } else {\r\n      this.win();\r\n    }\r\n  }\r\n\r\n  win() {\r\n    this.stop();\r\n  }\r\n\r\n  die() {\r\n    this.stop();\r\n  }\r\n\r\n  isOutside(cell: Cell) {\r\n    const { nbCellsX, nbCellsY } = this.configuration;\r\n    return cell.x < 0 || cell.x >= nbCellsX || cell.y < 0 || cell.y >= nbCellsY;\r\n  }\r\n\r\n  getScore(): number {\r\n    return this.score;\r\n  }\r\n\r\n  getGrid(): Grid {\r\n    return this.grid;\r\n  }\r\n\r\n  stop() {\r\n    this.running = false;\r\n  }\r\n}\r\n"},"lineCount":null}},"error":null,"hash":"897b1c6ecf8dc3f1e8e112a2d0c5d151","cacheData":{"env":{}}}